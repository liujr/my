{extend name="public/base" /} 
{block name="main"}
<div class="layui-elem-quote quoteBox">
    <form class="layui-form" action="" method="post">
        <div class="layui-inline">
            <div class="layui-input-inline">
                <input type="text" value="" name="searchkey" class="layui-input" placeholder="请输入搜索的内容">
            </div>
            <a class="layui-btn search_btn" lay-submit="" lay-filter="reload">搜索</a>
        </div>
        <div class="layui-inline">
            <a href="javascript:;" url= "{:url('menu/add')}" class="layui-btn layui-btn-normal addTopMenu">添加顶级节点</a>
        </div>
    </form>
</div>
<!--列表-->
<form class="layui-form">
    <table cellspacing="0" cellpadding="0" border="0" class="layui-table">
        <thead>
            <tr>
                <th>
                    <div class="layui-table-cell "><span>节点名称</span></div>
                </th>
                <th>
                    <div class="layui-table-cell "><span>节点URL</span></div>
                </th>
                <th>
                    <div class="layui-table-cell "><span>备注</span></div>
                </th>
                <th>
                    <div class="layui-table-cell "><span>排序</span></div>
                </th>
                <th>
                    <div class="layui-table-cell "><span>操作</span></div>
                </th>
            </tr>
        </thead>
        <tbody>
        {volist name="menulist.list" id="v1"}
            <tr class="nodelist" data-id="{$v1['id']}" data-url="{:url('menu/add')}">
                <td class="td_left">
                    <div class="layui-table-cell ">{$v1['menuname']}</div>
                </td>
                <td class="td_left">
                    <div class="layui-table-cell ">{$v1['menuurl']}</div>
                </td>
                <td class="td_left">
                    <div class="layui-table-cell ">{$v1['remark']}</div>
                </td>
                <td class="td_left">
                    <div class="layui-table-cell ">{$v1['sort']}</div>
                </td>
                <td class="td_center">
                    <a href="javascript:;" class="addNode layui-btn layui-btn-primary layui-btn-xs">添加菜单</a>&nbsp;&nbsp;
                    <a href="javascript:;" class="editNode layui-btn layui-btn-xs">修改</a>&nbsp;&nbsp;
                    <a href="javascript:;" data-id="{$v1['id']}" class="delNode layui-btn layui-btn-danger layui-btn-xs">删除</a>
                </td>
            </tr>
            {volist name="v1.children" id="v2"}
                <tr data-id="{$v2['id']}" style="display: none;" class="nodelist_{$v1['id']}">
                    <td class="td_left">
                        <div class="layui-table-cell" style="color:#1E9FFF">|-- {$v2['menuname']}</div>
                    </td>
                    <td class="td_left">
                        <div class="layui-table-cell ">{$v2['menuurl']}</div>
                    </td>
                    <td class="td_left">
                        <div class="layui-table-cell ">{$v2['remark']}</div>
                    </td>
                    <td class="td_left">
                        <div class="layui-table-cell ">{$v2['sort']}</div>
                    </td>
                    <td class="td_center">
                        <a href="javascript:;" class="editNode layui-btn layui-btn-xs">修改</a>&nbsp;&nbsp;
                        <a href="javascript:;" data-id="{$v2['id']}" class="delNode layui-btn layui-btn-danger layui-btn-xs">删除</a>
                    </td>
                </tr>
            {/volist}
        {/volist}
        </tbody>
    </table>
</form>
<!--列表E-->
{/block}

{block name="script"}
<script>
// 创建一个Socket实例
var socket = new WebSocket('ws://120.79.32.177:8080');

// 打开Socket
socket.onopen = function(event) {
// 发送一个初始化消息
socket.send('I am the client and I\'m listening!');
}

// 监听消息
socket.onmessage = function(event) {
console.log('Client received a message',event);
};

// 监听Socket的关闭
socket.onclose = function(event) {
console.log('Client notified socket has closed',event);
};

</script>
{/block}